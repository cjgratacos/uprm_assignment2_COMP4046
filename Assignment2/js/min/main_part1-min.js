"use strict";function init_app(){part1Objects.push(new Part1Constructor("asteroid-original","0",{keydown:handleKeyDownOriginal,keyup:handleKeyUpOriginal,handlerKeys:handlerKeysOriginal})),part1Objects.push(new Part1Constructor("asteroid-q2a","1",{keydown:handleKeyDownOriginal,keyup:handleKeyUpOriginal,handlerKeys:part2HandlerKeys})),part1Objects.push(new Part1Constructor("asteroid-q2b","2",{keydown:handleKeyDownOriginal,keyup:handleKeyUpOriginal,handlerKeys:part2HandlerKeys},{torus:!0})),part1Objects.push(new Part1Constructor("asteroid-q3","3",{keydown:handleKeyDownOriginal,keyup:handleKeyUpOriginal,handlerKeys:part3HandlerKeys},{torus:!0})),initParams(part1Objects[0].width,part1Objects[0].height),initGUI(params,part1Objects[0].width,part1Objects[0].height,part1Folder),part1Folder.open(),tick()}function focusCanvas(a,e){focus=a;for(var t=document.getElementsByClassName("buttonx"),s=0;s<t.length;s++)t[s].classList.contains("bg--primary")?t[s].classList.remove("bg--primary"):t[s].classList.remove("button-muted"),t[s]===e?t[s].classList.add("bg--primary"):t[s].classList.add("bg--muted");part1Objects.forEach(function(e){e.canvasName===a&&e.canvas.focus()})}function animate(){var a=(new Date).getTime()/1e3;0!=params_animation.lastTime?params_animation.elapsed=a-params_animation.lastTime:params_animation.startTime=a,params_animation.lastTime=a}function initParams(a,e){params={x0:a/2,y0:e/2,angle:0,inSpace:!1,bounceOnBorder:!1,angleVelocity:180,velocity:20,vx:0,vy:0,acceleration:.1}}function initGUI(a,e,t,s){s.add(a,"x0").min(0).max(e).step(1),s.add(a,"y0").min(0).max(t).step(1),s.add(a,"angle").min(-180).max(180).step(1),s.add(a,"inSpace"),s.add(a,"bounceOnBorder"),s.add(a,"angleVelocity").min(0).max(720).step(.1),s.add(a,"velocity").min(0).max(50).step(.1),s.add(a,"vx").min(-50).max(50).step(.1),s.add(a,"vy").min(-50).max(50).step(.1),s.add(a,"acceleration").min(0).max(50).step(.1)}function tick(){animate(),handleKeys(),drawAll(),windowRequestAnimFrame(tick)}function handleKeys(){part1Objects.forEach(function(a){(a.canvasName===focus||""===focus)&&a.handleKeys(params,params_animation)})}function drawAll(){part1Objects.forEach(function(a){(a.canvasName===focus||""===focus)&&(a.clear(),a.drawShip(params))})}function handleKeyDownOriginal(a){a.preventDefault(),this.currentlyPressedKeys[a.keyCode]=!0,console.log(a),67==a.keyCode&&console.log('Pressed "K"')}function handleKeyUpOriginal(a){this.currentlyPressedKeys[a.keyCode]=!1}function handlerKeysOriginal(a,e){this.currentlyPressedKeys[37]&&(a.angle-=a.angleVelocity*e.elapsed),this.currentlyPressedKeys[39]&&(a.angle+=a.angleVelocity*e.elapsed),a.angle>180?a.angle-=360:a.angle<-180&&(a.angle+=360),this.currentlyPressedKeys[38],this.currentlyPressedKeys[40]}function part2HandlerKeys(a,e){this.currentlyPressedKeys[37]&&(params.angle-=params.angleVelocity*e.elapsed),this.currentlyPressedKeys[39]&&(params.angle+=params.angleVelocity*e.elapsed),params.angle>180?params.angle-=360:params.angle<-180&&(params.angle+=360),this.currentlyPressedKeys[38]&&(params.inSpace||(params.x0+=e.elapsed*params.velocity*Math.sin(params.angle/180*Math.PI),params.y0-=e.elapsed*params.velocity*Math.cos(params.angle/180*Math.PI))),this.currentlyPressedKeys[40]&&!params.inSpace&&(params.inSpace||(params.x0-=e.elapsed*params.velocity*Math.sin(params.angle/180*Math.PI),params.y0+=e.elapsed*params.velocity*Math.cos(params.angle/180*Math.PI)))}function part3HandlerKeys(a,e){this.currentlyPressedKeys[37]&&(params.angle-=params.angleVelocity*e.elapsed),this.currentlyPressedKeys[39]&&(params.angle+=params.angleVelocity*e.elapsed),params.angle>180?params.angle-=360:params.angle<-180&&(params.angle+=360),this.currentlyPressedKeys[38]&&(params.inSpace?(params.vx+=e.elapsed*params.acceleration*Math.sin(params.angle/180*Math.PI),params.vy-=e.elapsed*params.acceleration*Math.cos(params.angle/180*Math.PI)):(params.x0+=e.elapsed*params.velocity*Math.sin(params.angle/180*Math.PI),params.y0-=e.elapsed*params.velocity*Math.cos(params.angle/180*Math.PI))),this.currentlyPressedKeys[40]&&(params.inSpace?(params.vx-=e.elapsed*params.acceleration*Math.sin(params.angle/180*Math.PI),params.vy+=e.elapsed*params.acceleration*Math.cos(params.angle/180*Math.PI)):(params.x0-=e.elapsed*params.velocity*Math.sin(params.angle/180*Math.PI),params.y0+=e.elapsed*params.velocity*Math.cos(params.angle/180*Math.PI))),params.inSpace&&(params.angle<-90&&params.angle>90?(params.x0+=params.vx*e.elapsed,params.y0-=params.vy*e.elapsed):(params.x0+=params.vx*e.elapsed,params.y0+=params.vy*e.elapsed))}function Part1Constructor(a,e,t,s){this.canvasName=null,this.canvas=null,this.ctx=null,this.width=null,this.height=null,this.canvasNumber=null,this.handleKeys=null,this.currentlyPressedKeys={},this.start(a,e,t),this.extraParams=s||{torus:!1}}var gui=new dat.GUI({autoplace:!0}),part1Folder=gui.addFolder("Animation and Keyboard"),params={},focus="",params_animation={startTime:0,lastTime:0,elapsed:0,totalElapsed:0},part1Objects=new Array,windowRequestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,e){window.setTimeout(a,1e3/60)}}();Part1Constructor.prototype.start=function(a,e,t){this.canvasName=a,this.canvas=document.getElementById(a),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.canvasNumber=e,this.handleKeys=t.handlerKeys.bind(this),this.initKeys(t)},Part1Constructor.prototype.initKeys=function(a){this.canvas.setAttribute("tabindex",this.canvasNumber),this.canvas.addEventListener("keydown",a.keydown.bind(this),!0),this.canvas.addEventListener("keyup",a.keyup.bind(this),!0)},Part1Constructor.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},Part1Constructor.prototype.drawShip=function(a){this.extraParams.torus?this.drawShipTorus(a):this.drawShipOriginal(a)},Part1Constructor.prototype.drawShipOriginal=function(a){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.translate(a.x0,a.y0),this.ctx.rotate(a.angle/180*Math.PI),this.ctx.beginPath(),this.ctx.moveTo(0,-20),this.ctx.lineTo(10,10),this.ctx.lineTo(-10,10),this.ctx.lineTo(0,-20),this.ctx.strokeStyle="red",this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.setTransform(1,0,0,1,0,0)},Part1Constructor.prototype.drawShipTorus=function(a){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.translate(a.x0,a.y0),this.ctx.rotate(a.angle/180*Math.PI),a.x0>this.width?a.x0=0:a.x0<0&&(a.x0=this.width),a.y0>this.height?a.y0=0:a.y0<0&&(a.y0=this.height),this.ctx.beginPath(),this.ctx.moveTo(0,-20),this.ctx.lineTo(10,10),this.ctx.lineTo(-10,10),this.ctx.lineTo(0,-20),this.ctx.strokeStyle="red",this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.setTransform(1,0,0,1,0,0)};