"use strict";function initGUI(){gui=new dat.GUI({autoPlace:!0}),gui.add(params,"x0").min(0).max(w2).listen().onChange(drawAll),gui.add(params,"y0").min(0).max(h2).listen().onChange(drawAll),gui.add(params,"scale").min(.01).max(2.5).step(.01).listen().onChange(drawAll),gui.add(params,"angle").min(-180).max(180).listen().onChange(drawAll),gui.add(params,"showImage").onChange(drawAll)}function initMouse(){canvas1.addEventListener("mousedown",onMouseDown,!1),canvas2.addEventListener("mousedown",onMouseDown,!1),canvas1.addEventListener("mousemove",onMouseMove,!1),canvas2.addEventListener("mousemove",onMouseMove,!1),canvas1.addEventListener("mouseup",onMouseUp,!1),canvas2.addEventListener("mouseup",onMouseUp,!1)}function onMouseDown(t){var a=t.target.getBoundingClientRect();xpix=t.clientX-a.left,ypix=t.clientY-a.top,t.target==canvas1?(ctx1.strokeStyle="#ff8000",ctx1.lineWidth=4,ctx1.setTransform(1,0,0,1,0,0),drawSquare(ctx1,xpix,ypix,4),drawAll()):t.target==canvas2&&Math.abs(xpix-params.x0)<10&&Math.abs(ypix-params.y0)<10&&(dragRedPin=1)}function onMouseMove(t){return dragRedPin>0&&t.target==canvas2?onDragRedPin(t):void 0}function onMouseUp(t){dragRedPin=0}function onDragRedPin(t){var a=t.target.getBoundingClientRect();xpix=t.clientX-a.left,ypix=t.clientY-a.top,params.x0=xpix,params.y0=ypix,drawAll()}function drawSquare(t,a,e,n){t.beginPath(),t.moveTo(a-n/2,e-n/2),t.lineTo(a+n/2,e-n/2),t.lineTo(a+n/2,e+n/2),t.lineTo(a-n/2,e+n/2),t.lineTo(a-n/2,e-n/2),t.stroke()}function drawShape(t,a){}function transformPoints(t,a){var e;return e}function drawAll(){ctx1.setTransform(1,0,0,1,0,0),ctx2.setTransform(1,0,0,1,0,0),ctx2.clearRect(0,0,w2,h2),ctx1.strokeStyle="#ff0000",ctx1.lineWidth=3,drawSquare(ctx1,w1/2,0,10),ctx2.strokeStyle="#ff0000",ctx2.lineWidth=3,drawSquare(ctx2,params.x0,params.y0,10),M=mat3.create(),matElem=document.getElementById("mat"),matElem.innerHTML="M = "+mat3.toHTML(M)}function start(){canvas1=document.getElementById("canvas1"),canvas2=document.getElementById("canvas2"),ctx1=canvas1.getContext("2d"),ctx2=canvas2.getContext("2d"),w1=canvas1.width,h1=canvas1.height,w2=canvas2.width,h2=canvas2.height,initGUI(),initMouse(),drawAll()}var gui=new dat.GUI({autoplace:!0}),part2Folder=gui.addFolder("Interactive Transformation"),ctx1,ctx2,params={x0:150,y0:20,scale:1,angle:0,showImage:!0},gui,dragRedPin=0;mat3.toHTML=function(t){var a='<table class="matrixTable"><tbody>';return a+="<tr><td>"+t[0].toFixed(2)+"</td><td>"+t[3].toFixed(2)+"</td><td>"+t[6].toFixed(2)+"</td></tr>",a+="<tr><td>"+t[1].toFixed(2)+"</td><td>"+t[4].toFixed(2)+"</td><td>"+t[7].toFixed(2)+"</td></tr>",a+="<tr><td>"+t[2].toFixed(2)+"</td><td>"+t[5].toFixed(2)+"</td><td>"+t[8].toFixed(2)+"</td></tr>",a+="</tbody></table>"};